<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Madm API Documentation by iyanski</title>

    <link rel="stylesheet" href="./stylesheets/styles.css">
    <link rel="stylesheet" href="./stylesheets/video.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!-- <link href='//fonts.googleapis.com/css?family=Work+Sans' rel='stylesheet' type='text/css'> -->
    <link rel="stylesheet" href="./stylesheets/bootstrap.css">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>

    <div id="sidenav">
      <nav class="sidebar-nav" role="navigation">
        <p>Madm API Docs</p>
        <ul class="sidebar-nav-items">
          <li>
            <a href="/#registrations">Registrations</a>
          </li>
          <li>
            <a href="/#sessions">Sessions</a>
          </li>
        </ul>
      </nav>
    </div>
    <div class="content">


      <h1>API Reference</h1>
      <i>
        Note: All API response shall be in JSON format. Specify the content-type to 'application/json' if the request is in JSON format. If not, there is no need to specify the content-type.
      </i>
      <hr/>

      <h2>Authentication</h2>
      <p>
        Upon the user's sign-up process, a user authenticity token will be return to the session login request. This token shall be used for succeeding requests made to the API Server.
      </p>
      <hr/>
      <h4>Errors</h4>
      <p>
        Upon the user's sign-up process, a user authenticity token will be return to the session login request. This token shall be used for succeeding requests made to the API Server.
      </p>
      <div class="well">
        <table class="table">
          <thead>
            <tr>
              <th>Response Code</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>200</td>
              <td>OK  Everything worked as expected.</td>
            </tr>
            <tr>
              <td>400</td>
              <td>Bad Request Often missing a required parameter.</td>
            </tr>
            <tr>
              <td>401</td>
              <td>Unauthorized  No valid API key provided.</td>
            </tr>
            <tr>
              <td>402</td>
              <td>Request Failed  Parameters were valid but request failed.</td>
            </tr>
            <tr>
              <td>404</td>
              <td>Not Found The requested item doesn't exist.</td>
            </tr>
            <tr>
              <td>500, 502, 503, 504</td>
              <td>Server Errors  Something went wrong on Stripe's end.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <h4>Response Structure</h4>
      <div class="well">
        <code>
          {
            "status": 1001,
            "data": {},
            "message": "Error Message in String format"
          }
        </code>
      </div>
      <hr/>
      <section id="#registrations">
        <h2>Registrations</h2>
        <p>To register a user, you create a user object. The authentication_token can be retrieved in the response.
        <hr/>
        <h4>Endpoint</h4>
        <code>POST /users</code>
        <hr/>
        <h4>Parameters</h4>
        <div class="well">

          <table class="table">
            <thead>
              <tr>
                <th>Attributes</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <strong>email</strong>
                  <br/>
                  <small>
                    String
                  </small>
                </td>
                <td>
                  The email address of the user used during registration.
                </td>
              </tr>
              <tr>
                <td>
                  <strong>password</strong>
                  <br/>
                  <small>
                    String
                  </small>
                </td>
                <td>
                  The password of the user.
                </td>
              </tr>
              <tr>
                <td>
                  <strong>first_name</strong>
                  <br/>
                  <small>
                    String
                  </small>
                </td>
                <td>
                  The first name of the user. First names can be a single word or not to accomodate people with multiple first names.
                </td>
              </tr>
              <tr>
                <td>
                  <strong>last_name</strong>
                  <br/>
                  <small>
                    String
                  </small>
                </td>
                <td>
                  The last name of the user. The same as the first name, this can accomodate multiple last names. ex. de la Cruz.
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <hr/>
        <h4>JSON Request Structure</h4>
        <div class="well">
          <code>
            {
              "user": {
                "email": "",
                "password": "",
                "first_name": "",
                "last_name": ""
              }
            }
          </code>
        </div>
        <hr/>
        <h4>JSON Response</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 1000,<br/>
            &nbsp;&nbsp;"data": {<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"id": 9,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"authentication_token": 36r6cFEu6BS9zh1gVUXY,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar": "/images/original/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"created_at": "2015-09-01T12:33:13.522Z",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"email": "e.a.abais22@mailinator.com",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"first_name": null,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"last_name": null,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"updated_at": "2015-09-01T12:33:13.522Z"<br/>
            &nbsp;&nbsp;},<br/>
            &nbsp;&nbsp;"message": ""<br/>
            }<br/>
          </code>
        </div>
        <hr/>
        <h4>Errors</h4>
        <p>The error messages may vary depending on the nature of the error. Below are the identified possible error scenarios.</p>
        <ul>
          <li>Email has already been taken</li>
          <li>Password can't be blank</li>
        </ul>

        <hr/>
        <h4>JSON Response</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 1001,<br/>
            &nbsp;&nbsp;"data": null<br/>
            &nbsp;&nbsp;"message": "Error Message in String format"<br/>
            }<br/>
          </code>
        </div>
      </section>
      <hr/>
      <section id="#sessions">
        <h2>Sessions</h2>
        <p>Only registered users can successfully make this request. There is no need to provide the authenticity token that was retrieved during the registration.</p>

        <hr/>
        <h4>Endpoint</h4>
        <code>POST /users/sign_in</code>
        <hr/>
        <h4>Parameters</h4>
        <div class="well">

          <table class="table">
            <thead>
              <tr>
                <th>Attributes</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <strong>email</strong>
                  <br/>
                  <small>
                    String
                  </small>
                </td>
                <td>
                  The email address of the user to be registered.
                </td>
              </tr>
              <tr>
                <td>
                  <strong>password</strong>
                  <br/>
                  <small>
                    String
                  </small>
                </td>
                <td>
                  The password of the user.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <hr/>
        <h4>JSON Request Structure</h4>
        <div class="well">
          <code>
            {
              "user": {
                "email": "",
                "password": ""
              }
            }
          </code>
        </div>
        <hr/>
        <h4>JSON Response</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 2000,<br/>
            &nbsp;&nbsp;"data": {<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"id": 9,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"authentication_token": 36r6cFEu6BS9zh1gVUXY,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar": "/images/original/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"created_at": "2015-09-01T12:33:13.522Z",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"email": "e.a.abais22@mailinator.com",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"first_name": null,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"last_name": null,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"updated_at": "2015-09-01T12:33:13.522Z"<br/>
            &nbsp;&nbsp;},<br/>
            &nbsp;&nbsp;"message": ""<br/>
            }<br/>
          </code>
        </div>

        <h4>Errors</h4>
        <p>Any failed requests to this endpoint will return only one identified error response</p>
        <hr/>
        <h4>JSON Response</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 2001,<br/>
            &nbsp;&nbsp;"data": null<br/>
            &nbsp;&nbsp;"message": "Invalid email or password."<br/>
            }<br/>
          </code>
        </div>
      </section>


      <hr/>
      <section id="#invitation">
        <h2>Invitation</h2>
        <p>This invitation will send an invitation currently via email to a non-existing madm user to join madm and automatically be added to the user's madm list upon signing up using the invitation link sent via email. To send an invitation, you have to create an invitation object.</p>

        <hr/>
        <h4>Endpoint</h4>
        <code>POST /api/v1/invitations</code>
        <hr/>
        <h4>Request Headers</h4>
        <div class="well">
          <code>
            X-User-Email alice@example.com<br/>
            X-User-Token 1G8_s7P-V-4MGojaKD7a
          </code>
        </div>

        <hr/>
        <h4>JSON Request Structure</h4>
        <div class="well">
          <code>
            {
              "invitation": {
                "email": "",
                "first_name": "",
                "last_name": "",
              }
            }
          </code>
        </div>

        <hr/>
        <h4>JSON Response</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 5100,<br/>
            &nbsp;&nbsp;"data": {<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"id": 24,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"user_id": 15,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"email": "iyanski@gmail.com",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"first_name": "Ian Bert",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"last_name": "Tusil",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"code": "ASQi52vBdkpVAVuQkM7w_w",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"created_at": "2015-09-11T16:49:05.138Z",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"updated_at": "2015-09-11T16:49:05.138Z",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"code": "ltu49ZQoLd1el9Ux2NYy1w"<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"invited_by": "John Smith"<br/>
            &nbsp;&nbsp;},<br/>
            &nbsp;&nbsp;"message": "Invitation to Ian Bert is sent!"<br/>
            }<br/>
          </code>
        </div>

        <h4>Errors</h4>
        <p>Any failed requests to this endpoint will return these error response</p>
        <hr/>
        <h4>JSON Response</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 5101,<br/>
            &nbsp;&nbsp;"data": null<br/>
            &nbsp;&nbsp;"message": "First name can't be blank"<br/>
            }<br/>
          </code>
        </div>

        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 5101,<br/>
            &nbsp;&nbsp;"data": null<br/>
            &nbsp;&nbsp;"message": "Last name can't be blank"<br/>
            }<br/>
          </code>
        </div>

        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 5101,<br/>
            &nbsp;&nbsp;"data": null<br/>
            &nbsp;&nbsp;"message": "Email can't be blank"<br/>
            }<br/>
          </code>
        </div>
      </section>



      <hr/>
      <section id="#friends">
        <h2>Friends</h2>
        <p>This will return an array of friends of the the user.</p>

        <hr/>
        <h4>Endpoint</h4>
        <code>GET /api/v1/friends</code>
        <hr/>
        <h4>Request Headers</h4>
        <div class="well">
          <code>
            X-User-Email alice@example.com<br/>
            X-User-Token 1G8_s7P-V-4MGojaKD7a
          </code>
        </div>

        <hr/>
        <h4>JSON Response</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 3000,<br/>
            &nbsp;&nbsp;"data": [<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;{<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"id": 9,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"user_id": 1,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"friend_id": 1,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"first_name": "John",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"last_name": "Smith",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"created_at": "2015-09-01T12:33:13.522Z",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"updated_at": "2015-09-01T12:33:13.522Z"<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;}<br/>
            &nbsp;&nbsp;]<br/>
            },<br/>
            &nbsp;&nbsp;"message": ""<br/>
            }<br/>
          </code>
        </div>
      </section>



      <hr/>
      <section id="#friend_request">
        <h2>Friend Requests</h2>
        <p>To be able to connect with other Madm Users. You create a friend request object. This friend request object can have a status of "pending, accepted and ignored." </p>

        <hr/>
        <h4>Endpoint</h4>
        <code>POST /api/v1/friend_requests</code>
        <hr/>
        <h4>Request Headers</h4>
        <div class="well">
          <code>
            X-User-Email alice@example.com<br/>
            X-User-Token 1G8_s7P-V-4MGojaKD7a
          </code>
        </div>

        <hr/>
        <h4>Parameters</h4>
        <div class="well">

          <table class="table">
            <thead>
              <tr>
                <th>Attributes</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <strong>friend_id</strong>
                  <br/>
                  <small>
                    Integer
                  </small>
                </td>
                <td>
                  The <code>user.id</code> of the friend to be requested.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <hr/>
        <h4>JSON Request Structure</h4>
        <div class="well">
          <code>
            {
              "friend_request": {
                "friend_id": 0
              }
            }
          </code>
        </div>
        <hr/>
        <h4>JSON Response</h4>
        <p>The <code>user_id</code> is the reference id of the user being requested to connect. The Friend field is the information of the user who initiated the friend request</p>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 4100,<br/>
            &nbsp;&nbsp;"data": [<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;{<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"id": 1,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"user_id": 16,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"friend": {<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"id": 18,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"first_name": null,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"last_name": null,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"avatar_xlarge": "/images/xlarge/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"avatar_large": "/images/large/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"avatar_medium": "/images/medium/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"avatar_small": "/images/small/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"avatar_xsmall": "/images/xsmall/missing.png"<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;}<br/>
            &nbsp;&nbsp;],<br/>
            &nbsp;&nbsp;"message": ""<br/>
            }
          </code>
        </div>
        <hr/>
        <h4>Errors</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 4001,<br/>
            &nbsp;&nbsp;"data": null<br/>
            &nbsp;&nbsp;"message": "Error Message in String format."<br/>
            }<br/>
          </code>
        </div>
      </section>


      <section id="#drinks">
        <h2>Drinks</h2>
        <p>This will return an array drinks.</p>

        <hr/>
        <h4>Endpoint</h4>
        <code>GET /api/v1/drinks</code>
        <hr/>
        <h4>Request Headers</h4>
        <div class="well">
          <code>
            X-User-Email alice@example.com<br/>
            X-User-Token 1G8_s7P-V-4MGojaKD7a
          </code>
        </div>

        <hr/>
        <h4>JSON Response</h4>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 5000,<br/>
            &nbsp;&nbsp;"data": [{<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"id": 1,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"title": "Beer"<br/>
            &nbsp;&nbsp;}]<br/>
            },<br/>
            &nbsp;&nbsp;"message": ""<br/>
            }<br/>
          </code>
        </div>
        <hr/>
      </section>

      <section id="#user">
        <h2>Users</h2>
        <p>To be able to update the info of the user, Create a user object.</p>

        <hr/>
        <h4>Endpoint</h4>
        <p>To update values of the fields along with the other fields, use the `PUT` method.</p>
        <code>PUT /api/v1/users</code>
        <br/>
        <p>To update specific fields only, you can also use the `PATCH` method.</p>
        <code>PATCH /api/v1/users</code>
        <br/>
        <br/>
        <p>Set `is_open_for_intro` to TRUE if the user opts to be introduced, and FALSE if the user prefers to be private.</p>
        <hr/>
        <h4>Request Headers</h4>
        <div class="well">
          <code>
            X-User-Email alice@example.com<br/>
            X-User-Token 1G8_s7P-V-4MGojaKD7a
          </code>
        </div>

        <hr/>
        <h4>JSON Response</h4>
        <p>Regardless of the what value was updated, this endpoint will return the entire user object.</p>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 6000,<br/>
            &nbsp;&nbsp;"data": {<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"id": 15,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"email": "ian@madm.com",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"first_name": "\"Ian Bert\"",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"last_name": null,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"is_open_for_intro": true,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_xlarge": "/images/xlarge/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_large": "/images/large/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_medium": "/images/medium/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_small": "/images/small/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_xsmall": "/images/xsmall/missing.png"<br/>
            &nbsp;&nbsp;},<br/>
            &nbsp;&nbsp;"message": ""<br/>
            }
          </code>
        </div>
        <hr/>
      </section>


      <section id="#avatar">
        <h2>User Avatar</h2>
        <p>To update the avatar of the user, send the attachment along with the authentication headers.</p>

        <hr/>
        <h4>Endpoint</h4>
        <p>To update values of the fields along with the other fields, use the `PUT` method.</p>
        <code>POST /api/v1/users/avatar</code>
        <br/>
        <br/>
        <p>Below is a sample curl call to send photo to the endpoint. Please note the input field name `avatar`. </p>
        <code>curl -F "avatar=@/Users/iyanski/Pictures/Avatars/ibtusil.jpg" -v -H "X-User-Email: ian@madm.com" -H "X-User-Token: PiYVjViZy-PM8wHQqKXz" http://127.0.0.1:3000/api/v1/users/avatar</code>
        <hr/>
        <h4>Request Headers</h4>
        <div class="well">
          <code>
            X-User-Email alice@example.com<br/>
            X-User-Token 1G8_s7P-V-4MGojaKD7a
          </code>
        </div>

        <hr/>
        <h4>JSON Response</h4>
        <p>Regardless of the what value was updated, this endpoint will return the entire user object.</p>
        <div class="well">
          <code>
            {<br/>
            &nbsp;&nbsp;"status": 6100,<br/>
            &nbsp;&nbsp;"data": {<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"id": 15,<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_xlarge": "/images/xlarge/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_large": "/images/large/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_medium": "/images/medium/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_small": "/images/small/missing.png",<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;"avatar_xsmall": "/images/xsmall/missing.png"<br/>
            &nbsp;&nbsp;},<br/>
            &nbsp;&nbsp;"message": ""<br/>
            }
          </code>
        </div>
        <hr/>
      </section>
    </div>
  </body>
</html>
